<!DOCTYPE html>
<html lang="fr" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Exploration de possibilités - Partie 1 - B. Hudyma Logs</title>
  <meta name="description" content="Faire des IA pour les jeux de plateau">
  <meta name="author" content="Baptiste Hudyma"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "B. Hudyma Logs",
    
    "url": "https:\/\/BaptisteHudyma.github.io"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/BaptisteHudyma.github.io"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/BaptisteHudyma.github.io",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/BaptisteHudyma.github.io\/post\/monte_carlo_tree_p1\/",
          "name": "Exploration de possibilités partie 1"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Baptiste Hudyma"
  },
  "headline": "Exploration de possibilités - Partie 1",
  "description" : "Partie 1: Blabla et implémentation\nJe suis nul aux échecs, aux dames, me fait rouler dessus au Puissance 4, bref les jeux de société ne sont pas mon fort. Par contre je me débrouille pas mal en programmation.\n",
  "inLanguage" : "fr",
  "wordCount":  2750 ,
  "datePublished" : "2021-04-22T00:00:00",
  "dateModified" : "2021-04-22T00:00:00",
  "image" : "https:\/\/BaptisteHudyma.github.io\/img\/github_profile.jpg",
  "keywords" : [ "Cpp, IA" ],
  "mainEntityOfPage" : "https:\/\/BaptisteHudyma.github.io\/post\/monte_carlo_tree_p1\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/BaptisteHudyma.github.io",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/BaptisteHudyma.github.io\/img\/github_profile.jpg",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Exploration de possibilités - Partie 1" />
<meta property="og:description" content="Faire des IA pour les jeux de plateau">
<meta property="og:image" content="https://BaptisteHudyma.github.io/img/github_profile.jpg" />
<meta property="og:url" content="https://BaptisteHudyma.github.io/post/monte_carlo_tree_p1/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="B. Hudyma Logs" />

  <meta name="twitter:title" content="Exploration de possibilités - Partie 1" />
  <meta name="twitter:description" content="Faire des IA pour les jeux de plateau">
  <meta name="twitter:image" content="https://BaptisteHudyma.github.io/img/github_profile.jpg" />
  <meta name="twitter:card" content="summary" />
  <link href='https://BaptisteHudyma.github.io/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.88.1" />
  <link rel="alternate" href="https://BaptisteHudyma.github.io/index.xml" type="application/rss+xml" title="B. Hudyma Logs"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://BaptisteHudyma.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="https://BaptisteHudyma.github.io/css/syntax.css" />
  <link rel="stylesheet" href="https://BaptisteHudyma.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-189718074-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://BaptisteHudyma.github.io">B. Hudyma Logs 
      </a>
      <a class="navbar-brand">
      <div class="js-toggle-wrapper">
    <div class="js-toggle">
        <div class="js-toggle-track">
            <div class="js-toggle-track-check">
                <img src="data:image/png;base64,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" role="presentation" style="pointer-events: none;" width="16" height="16">
            </div>
            <div class="js-toggle-track-x">
                <img src="data:image/png;base64,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" role="presentation" style="pointer-events: none;" width="16" height="16">
            </div>
        </div>
        <div class="js-toggle-thumb"></div>
        <input class="js-toggle-screenreader-only" type="checkbox" aria-label="Switch between Dark and Light mode">
    </div>
</div>



<style>

 

.js-toggle-wrapper {
    display: table;
    margin: 0 auto;
}

.js-toggle {
    touch-action: pan-x;
    display: inline-block;
    position: relative;
    cursor: pointer;
    background-color: transparent;
    border: 0;
    padding: 0;
    -webkit-touch-callout: none;
    user-select: none;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    -webkit-tap-highlight-color: transparent;
  }

  .js-toggle-screenreader-only {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }

  .js-toggle-track {
    width: 50px;
    height: 24px;
    padding: 0;
    border-radius: 30px;
    background-color: hsl(222, 14%, 7%);
    transition: all 0.2s ease;
  }

  .js-toggle-track-check {
    position: absolute;
    width: 17px;
    height: 17px;
    left: 5px;
    top: 0px;
    bottom: 0px;
    margin-top: auto;
    margin-bottom: auto;
    line-height: 0;
    opacity: 0;
    transition: opacity 0.25s ease;
  }

  .js-toggle--checked .js-toggle-track-check {
    opacity: 1;
    transition: opacity 0.25s ease;
  }

  .js-toggle-track-x {
    position: absolute;
    width: 17px;
    height: 17px;
    right: 5px;
    top: 0px;
    bottom: 0px;
    margin-top: auto;
    margin-bottom: auto;
    line-height: 0;
    opacity: 1;
    transition: opacity 0.25s ease;
  }

  .js-toggle--checked .js-toggle-track-x {
    opacity: 0;
  }

  .js-toggle-thumb {
    position: absolute;
    top: 1px;
    left: 1px;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background-color: #fafafa;
    box-sizing: border-box;
    transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1) 0ms;
    transform: translateX(0);
  }

  .js-toggle--checked .js-toggle-thumb {
    transform: translateX(26px);
    border-color: #19ab27;
  }

  .js-toggle--focus .js-toggle-thumb {
    box-shadow: 0px 0px 2px 3px rgb(255, 167, 196);
  }

  .js-toggle:active .js-toggle-thumb {
    box-shadow: 0px 0px 5px 5px rgb(255, 167, 196);
  }
</style>

<script>
    
    let systemInitiatedDark = window.matchMedia("(prefers-color-scheme: dark)");
    
    
    let theme = sessionStorage.getItem('theme');
    var switcher = document.getElementsByClassName('js-toggle')[0];
    
    
    if (systemInitiatedDark.matches) {
    }
    else{
        switcher.classList.toggle('js-toggle--checked');
    }
    
    
    function prefersColorTest(systemInitiatedDark) {
        var switcher = document.getElementsByClassName('js-toggle')[0];
        switcher.classList.toggle('js-toggle--checked');
        if (systemInitiatedDark.matches) {
            document.documentElement.setAttribute('data-theme', 'dark');
            
            sessionStorage.setItem('theme', '');
        } else {
            document.documentElement.setAttribute('data-theme', 'light');
            sessionStorage.setItem('theme', '');
        }
    }
    systemInitiatedDark.addListener(prefersColorTest);
    
    switcher.addEventListener("click", function () {
        
        let theme = sessionStorage.getItem('theme');
        
        this.classList.toggle('js-toggle--checked');
        
        if (theme === "dark") {
            document.documentElement.setAttribute('data-theme', 'light');
            sessionStorage.setItem('theme', 'light');
            
        }	else if (theme === "light") {
            document.documentElement.setAttribute('data-theme', 'dark');
            sessionStorage.setItem('theme', 'dark');
            
        } else if (systemInitiatedDark.matches) {
            document.documentElement.setAttribute('data-theme', 'light');
            sessionStorage.setItem('theme', 'light');
            
        } else {
            document.documentElement.setAttribute('data-theme', 'dark');
            sessionStorage.setItem('theme', 'dark');
        }
        
    });
    
    if (theme === "dark") {
        document.documentElement.setAttribute('data-theme', 'dark');
        sessionStorage.setItem('theme', 'dark');
        switcher.classList.add('js-toggle--checked');
    } else if (theme === "light") {
        document.documentElement.setAttribute('data-theme', 'light');
        sessionStorage.setItem('theme', 'light');
        switcher.classList.add('js-toggle--unchecked');
    }
</script>





      </a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Posts" href="/post">Posts</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        
          
            <li>
              <a title="About me" href="/page/about">About me</a>
            </li>
          
        

    

        
          
            <li>
              
                
                  <a href="/en" lang="en">en</a>
                
              
                
              
            </li>
          
        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="B. Hudyma Logs" href="https://BaptisteHudyma.github.io">
            <img class="avatar-img" src="https://BaptisteHudyma.github.io/img/github_profile.jpg" alt="B. Hudyma Logs" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Exploration de possibilités - Partie 1</h1>
              
              
              
                
                  <h2 class="post-subheading">Faire des IA pour les jeux de plateau</h2>
                
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posté le April 22, 2021
  
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;2750&nbsp;mots
  
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>





    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p><em><strong>Partie 1: Blabla et implémentation</strong></em></p>
<p>Je suis nul aux échecs, aux dames, me fait rouler dessus au Puissance 4, bref les jeux de société ne sont pas mon fort. Par contre je me débrouille pas mal en programmation.</p>
<p>Petite précision : à partir d&rsquo;ici quand je dis &ldquo;suite de coups&rdquo; je parle d&rsquo;un ordre de jeux : je joue, puis mon adversaire puis moi etc</p>
<!-- raw HTML omitted -->
<p>Faire un petit saut au-dessus du blabla jusqu&rsquo;à la partie intéressante.</p>
<h1 id="imaginez-vous-en-train-de-jouer-aux-échecs">Imaginez-vous en train de jouer aux échecs</h1>
<p>Quelle stratégie adopter ? On peut se dire qu&rsquo;on va faire au plus simple, et jouer des pions au hasard, mais la probabilité de gagner est assez faible si votre adversaire n&rsquo;a pas la même stratégie (à part si vous faites semblant de savoir ce que vous faites, ce qui peut le déstabiliser).
On va l&rsquo;appeler la &ldquo;méthode hasard&rdquo;.</p>
<p>L&rsquo;étape au-dessus serait de choisir des coups au hasard complet et garder le meilleur en tête jusqu&rsquo;à ce que votre adversaire vous annonce &ldquo;que bon ça fait une heure que tu n&rsquo;as pas bougé ton pion, je me casse&rdquo; (victoire !) ou si vous jouez avec un sablier, votre défaite.
Cette approche est bien meilleure que jouer directement des coups au hasard, votre solution finale dépend de tous les coups précédents.
Il se trouve cependant que dans ce type de jeux, le nombre de coups possibles augmente exponentiellement, impossible de tous les essayer (enfin, possible mais pas sous la pression du sablier !).
On l&rsquo;appellera &ldquo;méthode exploration&rdquo;.</p>
<p>Ou alors une autre méthode serait de réfléchir uniquement aux meilleurs coups que vous pouvez faire, puis les meilleurs coups que vous pouvez faire après ces meilleurs coups yadi yada&hellip;
Ce genre de méthode est qualifiée de greedy (gloutonne), c&rsquo;est-à-dire qu&rsquo;elle prend ses décisions sur l&rsquo;instant, pas le temps de réfléchir a la suite des évènements !
Cette approche est déjà meilleure que les deux précédentes, car on explore moins de possibilités (moins de mal de tête !) et on effectue sont une suite d&rsquo;actions forcément positives (pour un résultat pas forcément aussi positif).
Son désavantage est de tomber facilement dans les minimums locaux, comme se jeter sur un cavalier avec votre dame pour se la faire piquer par un pion.
De même, elle ne sacrifiera jamais un pion pour en manger un autre plus dangereux, et sa stratégie est donc très prévisible.
On va appeler celle-ci &ldquo;méthode greedy&rdquo;.</p>
<p>Ce qu&rsquo;il nous faut c&rsquo;est une méthode capable de rassembler les forces de ses copines, une espèce de Captain Planet des jeux de société !
Heureusement, ce problème a été beaucoup retourné par des gens intelligents (et/ou payez pour ça), qui nous on trouvé un ensemble de solutions toutes plus originales les une que les autres.
Mais ici on ne fait pas dans l&rsquo;originalité et on ne va parler que d&rsquo;arbres, na !</p>
<h1 id="construire-un-arbre">Construire un arbre</h1>
<p>Si vous avez déjà touché a l&rsquo;orienté objet un jour, il est probable que ce genre d&rsquo;exercice vous soit déjà tombé dessus.
Un arbre est une structure de donnée assez basique, ou on a un ensemble de nœuds qui appartiennent a un parent, et ont eu même des enfants qui ont des enfants etc.
C&rsquo;est une représentation assez intuitive pour nous, pauvre singes, et on la retrouve partout, dans tous les domaines d&rsquo;application (voir mon petit post sur <a href="https://BaptisteHudyma.github.io/post/galaxy_generation/">la génération de galaxies procédurales</a>, ou la galaxie est créé dans un arbre).</p>
<p>Ici, notre racine va être la position de base du plateau, sans aucuns mouvements si je joue commence, ou avec un mouvement de l&rsquo;adversaire s&rsquo;il commence (moins de coups à calculer yes !).
Chaque possibilité de jeux depuis la situation initiale va représenter un nouvel enfant pour notre racine.
Puis une fois qu&rsquo;on à explorer tous nos mouvements, c&rsquo;est le tour de l&rsquo;adversaire.
On génère ses mouvements possibles depuis chacun de nos mouvements, puis c&rsquo;est mon tour, et ainsi de suite jusqu&rsquo;à ce qu&rsquo;on atteigne la fin de la partie (gagné, perdu, égalité, que sais-je).</p>
<p>Petit exemple avec le TicTacToe :
<img src="/static/monteCarloTree/tree_tictactoe.gif" alt="">
(Emprunté au site <a href="http://turing.cs.pub.ro/auf2/html/chapters/chapter3/chapter_3_4_2.html">turing.cs</a>, à visiter pour des explications d&rsquo;algorithmes plus variés)</p>
<p>Bien on a un arbre maintenant.</p>
<h1 id="exploration-avec-monte-carlo">Exploration avec Monte Carlo</h1>
<p>L&rsquo;arbre qu&rsquo;on vient de construire est de taille raisonnable pour un tictactoe, ou le nombre de possibilités est réduite.
Pour un Puissance 4 ça pourrait encore fonctionner, mais pour les échecs (ou le Go) ça n&rsquo;est pas viable.
Il existe plusieurs techniques pour améliorer tout ça, celle qui nous intéresse s&rsquo;appelle <em>MCTS</em> &ldquo;Recherche Arborescente Monte-Carlo&rdquo; (voir la <a href="https://fr.wikipedia.org/wiki/Recherche_arborescente_Monte-Carlo">page Wikipedia</a>, qui bavarde moins que moi).</p>
<p>Cette technique a été utilisée comme la base pour l&rsquo;algorithme AlphaGo, champion du monde du jeu de Go en 2015 (ptit coup de vieux).
Elle se base sur quelques euristiques pour trouver une balance entre exploration de nouvelles possibilités et recherche autour des meilleurs suites d&rsquo;action déjà trouvées.
Cela permet de n&rsquo;explorer qu&rsquo;une fraction des possibilités tout en trouvant des coups intéressants.</p>
<p>Le but de ce billet de blog n&rsquo;est pas de faire un historique ou d&rsquo;expliquer une énième fois cette méthode sur internet, mais proposer quelques modifications</p>
<p>Un petit résumé vite fait, pour être sur la même page : le dur de la technique est constitué de 4 étapes :</p>
<ul>
<li>Se balader dans l&rsquo;arbre avec des euristiques jusqu&rsquo;à atteindre une feuille (un nœud sans enfants).</li>
<li>Lui créer des enfants : en gros lui ajouter en enfant tous les coups possibles à partir de ce nœud</li>
<li>Jouer des coups au hasard depuis l&rsquo;enfant crée juste avant jusqu&rsquo;à atteindre un état final.</li>
<li>Faire remonter le score final depuis l&rsquo;enfant jusqu&rsquo;à la racine.</li>
</ul>
<h1 id="représenter-ça-en-code">Représenter ça en code</h1>
<p>On va faire une classe générique très simple pour l&rsquo;arbre, qui sera responsable de choisir les coups possibles, les dérouler jusqu&rsquo;à la fin et propager le résultat.
Le but n&rsquo;est pas de donner du code, mais simplement la structure globale et le détail de quelques méthodes.</p>
<h2 id="interface-game-state">Interface Game State</h2>
<p>Nous allons avoir besoin de coder la logique du jeu.
Pour cela, libre à vous de faire ce que vous voulez !
Il y a pour seule contrainte que votre classe de logique hérite de notre interface ci-dessous :</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Cpp" data-lang="Cpp"><span class="c1">//Interface
</span><span class="c1"></span><span class="k">class</span> <span class="nc">IGame_State</span> <span class="p">{</span>
    <span class="c1">//renvoi le score de cet etat
</span><span class="c1"></span>    <span class="k">virtual</span> <span class="kt">double</span> <span class="nf">get_score</span> <span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="c1">//renvoi le nombre de coups possible depuis cet etat
</span><span class="c1"></span>    <span class="k">virtual</span> <span class="kt">int</span> <span class="nf">get_move_count</span> <span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="c1">//effectue un mouvement depuis cet etat et le renvoi
</span><span class="c1"></span>    <span class="k">virtual</span> <span class="n">IGame_State</span><span class="o">*</span> <span class="nf">do_move</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">index</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="p">}</span>
</code></pre></div><p>Notre classe dérivée <code>IGame_State</code> sera utilisée dans notre arbre pour savoir ou on en est dans la partie.
Elle représente toute la logique du jeu, qui est donc proprement séparé de l&rsquo;exploration de l&rsquo;arbre.</p>
<h3 id="get_score">get_score</h3>
<p>Cette méthode nous donne le score de l&rsquo;état de jeux actuel.
On peut donc donner un gros score si on gagne, un score négatif si l&rsquo;on perd, etc</p>
<p>C&rsquo;est ici qu&rsquo;on peut devenir un peu créatif : Pour AlphaGo, Google a utilisé des réseaux de neurones pour évaluer une situation, de mon côté j&rsquo;ai fait une simple grille d&rsquo;occupation, mais on peut aussi se contenter de la somme des scores des pièces en jeu, ce que vous voulez vraiment !</p>
<p>Si notre jeu se joue a plusieurs, contre des adversaires, n&rsquo;oubliez pas de renvoyer le score <code>* -1.0</code> ou autre pour que notre arbre comprenne qu&rsquo;un bon coup joué par un adversaire est un mauvais coup pour nous !
À vous de garder l&rsquo;ordre de jeux en tête dans cette classe, notre arbre ne verra que des scores.</p>
<h3 id="get_move_count">get_move_count</h3>
<p>On renvoie le nombre de coups possibles après celui-ci (de 0 a l&rsquo;infini).
Ce nombre sera utilisé comme index par notre exploration d&rsquo;arbre : Si on lui dit qu&rsquo;il a 3 coups possibles, il appellera la fonction membre <code>do_move</code> avec un index de 0 a 2.
Si cette fonction renvoi 0, cela signifie qu&rsquo;aucun coup n&rsquo;est jouable par la suite : on a fini d&rsquo;explorer cette branche.</p>
<p>Pour cette fonction, je vous conseille de garder en mémoire (dans un <code>vector</code> par exemple) les coups possibles, pour ne les calculer qu&rsquo;une seule fois.</p>
<p>Calculer les coups possibles dépend du jeu que vous avez choisi d&rsquo;implémenter, bon courage donc.</p>
<h3 id="do_move">do_move</h3>
<p>Cette méthode est la plus importante : elle prend en entré l&rsquo;index d&rsquo;un coup possible (entre 0 et <code>get_move_count() - 1</code>) et nous renvoie un nouveau game state qui correspond a l&rsquo;état du jeu une fois ce coup joué.</p>
<p>Pas de soucis de désallocation, notre classe Node s&rsquo;en occupera (même si l&rsquo;utilisation d&rsquo;un smart pointer aurait été à préférer)</p>
<h2 id="notre-arbre">Notre arbre</h2>
<p>Enfin la partie intéressante !
On fait ici une classe Node, qui représente un nœud de l&rsquo;arbre.
Il est responsable du choix des enfants a crée, de comment explorer le bazar et de remonter les scores, puis nous dire quel est le meilleur combo.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Cpp" data-lang="Cpp"><span class="k">class</span> <span class="nc">Node</span> <span class="p">{</span>
    <span class="c1">//creer la node depuis un etat de jeux
</span><span class="c1"></span>    <span class="n">Node</span><span class="p">(</span><span class="n">Node</span><span class="o">*</span> <span class="n">parent</span><span class="p">,</span> <span class="n">IGame_State</span><span class="o">*</span> <span class="n">gameState</span><span class="p">);</span>

    <span class="c1">//trouve l enfant avec le meilleur score
</span><span class="c1"></span>    <span class="n">Node</span><span class="o">*</span> <span class="nf">get_best_child_UCB</span> <span class="p">();</span>
    <span class="n">Node</span><span class="o">*</span> <span class="nf">get_best_child_UCT</span> <span class="p">();</span>

    <span class="c1">//Ajoute un enfant parmi les coups possibles
</span><span class="c1"></span>    <span class="n">Node</span><span class="o">*</span> <span class="nf">expand_children</span> <span class="p">();</span>

    <span class="c1">//deroule une partie depuis cette node
</span><span class="c1"></span>    <span class="kt">float</span> <span class="nf">rollout</span> <span class="p">();</span>

    <span class="c1">//remonte le score a la racine
</span><span class="c1"></span>    <span class="kt">void</span> <span class="nf">backpropagate</span> <span class="p">(</span><span class="n">score</span><span class="p">);</span>


    <span class="k">private</span><span class="o">:</span>
        <span class="n">Node</span><span class="o">*</span> <span class="n">_parent</span><span class="p">;</span>           <span class="c1">//référence au parent
</span><span class="c1"></span>        <span class="n">list</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">*&gt;</span> <span class="n">_children</span><span class="p">;</span>   <span class="c1">//référence aux enfants
</span><span class="c1"></span>        <span class="n">IGame_State</span><span class="o">*</span> <span class="n">_state</span><span class="p">;</span>      <span class="c1">//référence a l&#39;état de jeu associé a cette node
</span><span class="c1"></span>
        <span class="kt">double</span> <span class="n">_score</span><span class="p">;</span>           <span class="c1">//score a cette node
</span><span class="c1"></span>        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">_nombreDeVisites</span><span class="p">;</span>    <span class="c1">//Nombre de passages par cette node
</span><span class="c1"></span>
<span class="p">}</span>
</code></pre></div><p>Notre class contient une référence a son parent dans un pointeur, pour l&rsquo;étape de backpropagation.</p>
<p>J&rsquo;utilise une list pour stocker les enfants, car on ne connais pas leur nombre.
Utiliser un vecteur est également possible, mais ici je n&rsquo;ai jamais besoin d&rsquo;accéder a un enfant par index, ils seront toujours choisis par itération.
Utiliser une map ou un tableau a taille variable (comme vector) n&rsquo;est pas intéressant quand une liste simplement chainé suffit.
Et oui, ce ne sont pas des smart pointers pour une raison de lisibilité (pas tant de place que ca sur un billet de blog).</p>
<p>Nous avons également un membre <code>_state</code> contenant l&rsquo;état du jeux correspondant a cette node.
Elle ne peut contenir que des références vers une classe dérivée de notre interface <code>IGame_State</code>, dont nous utilisons les fonctions dans notre recherche.</p>
<p>Les membres <code>_nombreDeVisites</code> et <code>_score</code> contiennent respectivement le nombre de passages par cette node (uniquement en backpropagation) et le score associé a l&rsquo;état de jeux <code>_state</code> et les scores de tous les enfants.</p>
<p>Du coté des méthode, on a besoin de 4 méthodes de base pour MCTS.
Élaborons un peu tout ça.</p>
<h3 id="constructeur">Constructeur</h3>
<p>Notre constructeur prend une classe dérivée de notre interface <code>IGame_State</code>, qui correspond a l&rsquo;état de jeu de cette node.
Il récupère aussi son parent pour l&rsquo;étape de backpropagation.</p>
<p>Il va alors vérifier si on à atteins le bout de l&rsquo;arbre, en appelant la méthode <code>get_move_count ()</code> de notre game state, et vérifier s&rsquo;il est égal a 0.</p>
<p>Si c&rsquo;est le cas, la recherche dans cette branche est terminée, on peut appeler <code>backpropagate ()</code> et faire un petit café pour fêter ça : une suite de coups terminée, une !</p>
<h3 id="get_best_child">get_best_child</h3>
<p>On appelle cette méthode lors de l&rsquo;exploration, seulement quand notre node à des enfants.</p>
<p>Ça parait simple : trouver le meilleur des enfants et le renvoyer.</p>
<p>Mais comment on sélectionne le meilleur enfant ?
Si on utilise la fonction <code>get_score</code>, on va faire une recherche greedy sans exploration, on ne veut pas de ca.
Ça n&rsquo;est pas non plus le moment de créer une euristique d&rsquo;évaluation (quoi que si ça vous amuse&hellip;)</p>
<p>J&rsquo;ai beaucoup vu sortir la formule UCB1 (Upper Confidence Bound 1), qui renvoi la somme des scores sur la somme des visites, qui permet de balancer l&rsquo;exploration et les performances.
$$
UCB1(visits, score) = \frac{score}{visits}
$$</p>
<p>On va utiliser Une amélioration de cette méthode, appelé UCT (UCb1 applied to Trees), qui donne un contrôle sur l&rsquo;exploration :
$$
UCT(visits, score, parentVisits) = UCB1(visits, score) + c \sqrt{ \frac{ln(parentVisits)}{visits}  }
$$
Avec c un paramètre permettant de régler le &ldquo;taux&rdquo; d&rsquo;exploration désiré (&gt; 0).</p>
<p>Le principe est encore une fois assez simple : on additionne a l&rsquo;UCB1 un nombre qui favorise l&rsquo;exploration.</p>
<p>Le logarithme utilisé ici sur le nombre de visites du parent permet ici d&rsquo;explorer en priorité les enfants les moins explorés (nombre de visites petit par rapport aux visites du parent).
Le logarithme permet de diminuer l&rsquo;exploration quand le nombre de visites augmente (ie: on converge vers une solution).</p>
<p>Ici, on voudra utiliser les deux métriques, on aura besoin :</p>
<ul>
<li>d&rsquo;une fonction <code>get_best_child_UCT</code> pour la phase d&rsquo;exploration</li>
<li>d&rsquo;une fonction <code>get_best_child_UCB</code> pour sélectionner le meilleur coup final.</li>
</ul>
<h3 id="expand_children">expand_children</h3>
<p>Cette méthode choisie un coup à jouer parmi ceux proposés par le game state, et ajoute une node en enfant de notre node.
L&rsquo;adresse de ce nouvel enfant est renvoyé pour pouvoir lancer la phase rollout.</p>
<p>Pour créer un nouvel enfant, on va utilise la fonction <code>do_move</code> de notre interface <code>IGame_State</code> pour obtenir un nouvel état de jeu correspondant a l&rsquo;état de l&rsquo;enfant.
On peut ensuite appeler le constructeur de node avec cet état de jeu.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Cpp" data-lang="Cpp">    <span class="n">Node</span><span class="o">*</span> <span class="n">Node</span><span class="o">::</span><span class="n">expand_children</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="c1">//choisir un index non exploré
</span><span class="c1"></span>
        <span class="c1">//obtenir le prochain etat
</span><span class="c1"></span>        <span class="n">IGame_State</span><span class="o">*</span> <span class="n">nextState</span> <span class="o">=</span> <span class="n">_state</span><span class="o">-&gt;</span><span class="n">do_move</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
        
        <span class="c1">//nouvelle node avec celle ci comme parent et le nouveau state
</span><span class="c1"></span>        <span class="k">return</span> <span class="k">new</span> <span class="nf">Node</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">nextState</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div><p>Pour le choix de l&rsquo;index, on est tout a fait libre.
C&rsquo;est un bon endroit pour utiliser un peu d&rsquo;aléatoire (pour commencer) et marquer sur notre CV qu&rsquo;on a utilisé une recherche de Monte Carlo.
On améliorera ca dans la partie 2.</p>
<h3 id="rollout">rollout</h3>
<p>Une de mes préférées !
C&rsquo;est la phase &ldquo;joue des coups jusqu&rsquo;à ce que ca ne soit plus possible&rdquo; de notre exploration.</p>
<p>L&rsquo;appellation <em>Monte Carlo</em> désigne un choix aléatoire quelque part dans notre programme, et c&rsquo;est généralement a cet endroit : On va choisir un coup possible au hasard depuis notre état actuel, et faire un coup possible depuis ce nouvel état et ainsi de suite.
On récupère alors le score de l&rsquo;état final qu&rsquo;on renvoie.</p>
<p>J&rsquo;ai vu assez souvent des gens qui oublient la partie <em>Monte Carlo</em> de l&rsquo;exploration d&rsquo;arbre avec Monte Carlo, mais on leur pardonne, après tout on fait ce qu&rsquo;on veut !</p>
<p>Pour s&rsquo;amuser, on peut changer le choix aléatoire par un choix déterministe, et faire des choix greedy, ou inventer une euristique, liberté absolue de ce côté la.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Cpp" data-lang="Cpp"><span class="kt">void</span> <span class="n">Node</span><span class="o">::</span><span class="n">rollout</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">IGame_State</span><span class="o">*</span> <span class="n">currentState</span> <span class="o">=</span> <span class="n">_state</span><span class="p">;</span>
    
    <span class="k">while</span><span class="p">(</span><span class="n">currentState</span><span class="o">-&gt;</span><span class="n">get_move_count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">currentState</span> <span class="o">=</span> <span class="n">currentState</span><span class="o">-&gt;</span><span class="n">do_move</span><span class="p">(</span>
            <span class="c1">//index a choisir
</span><span class="c1"></span>        <span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">//propager le score de l&#39;état final
</span><span class="c1"></span>    <span class="k">this</span><span class="o">-&gt;</span><span class="n">backpropagate</span><span class="p">(</span>
        <span class="n">currentState</span><span class="o">-&gt;</span><span class="n">get_score</span><span class="p">()</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>On n&rsquo;utilise ici que des classes dérivées de <code>IGame_State</code>, aucune node n&rsquo;est créée.</p>
<h3 id="backpropagate">backpropagate</h3>
<p>Une fois la phase de rollout terminée, on va remonter le score de notre node jusqu&rsquo;à la racine.
Elle ajoute le score au score de la node actuel, et on incrémente le compteur de visites.</p>
<p>Cette fonction est récursive : si on a un parent, on appelle <code>_parent-&gt;backpropagate(score)</code> après avoir changé nos scores et le tour est joué !</p>
<p>Quelque chose comme</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Cpp" data-lang="Cpp"><span class="kt">void</span> <span class="n">Node</span><span class="o">::</span><span class="n">backpropagate</span> <span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//incremente le nombre de visites et score
</span><span class="c1"></span>    <span class="n">_nombreDeVisites</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">_score</span> <span class="o">+=</span> <span class="n">score</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="k">dynamic_cast</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">_parent</span><span class="p">)</span> <span class="o">!=</span> <span class="k">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//propager au parent si il existe
</span><span class="c1"></span>        <span class="n">_parent</span><span class="p">.</span><span class="n">backpropagate</span><span class="p">(</span><span class="n">score</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>J&rsquo;ai utilisé un <code>dynamic_cast</code> pour le test de l&rsquo;existence du parent, ca peut sauver dans un cas ou cette classe est utilisée comme base pour une nouvelle classe Node, crée par un programmeur négligeant qui n&rsquo;aurait pas pensé a faire <code>_parent = nullptr</code> dans le constructeur, ou une si on rencontre une désallocation sauvage du parent entre deux appels (oui oui les smart pointers&hellip;).</p>
<h2 id="faire-fonctionner-le-tout">Faire fonctionner le tout</h2>
<p>Il manque une étape, on a toute la logique mais rien pour la lancer.
Ça n&rsquo;est pas bien compliqué maintenant, le gros du travail est fait.</p>
<p>Il reste cependant un aspect intéressant non abordé : décider de la limite.
On ne va pas laisser cet algorithme tourner jusqu&rsquo;à ce que le ciel nous tombe sur la tête, il nous faut décider d&rsquo;une limite au-delà de laquelle on arrête nos itérations.
Un simple compteur fera l&rsquo;affaire (&ldquo;cherche N solutions, et rappels moi quand t&rsquo;as fini !&quot;), mais une solution à peine plus élaborée sera de choisir une limite temporelle (&ldquo;fais ton bazar pendant 5 secondes et zou&rdquo;).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Cpp" data-lang="Cpp"><span class="n">Node</span> <span class="nf">root</span><span class="p">(</span><span class="k">nullptr</span><span class="p">,</span> <span class="n">gameState</span><span class="p">);</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="c1">//chercher la meilleure feuille
</span><span class="c1"></span>    <span class="n">Node</span><span class="o">*</span> <span class="n">child</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span> 
    <span class="k">while</span><span class="p">(</span><span class="n">child</span><span class="o">-&gt;</span><span class="n">get_move_count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">not</span> <span class="n">child</span><span class="o">-&gt;</span><span class="n">is_fully_expanded</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="c1">//all children have not been explored
</span><span class="c1"></span>            <span class="n">child</span> <span class="o">=</span> <span class="n">child</span><span class="o">-&gt;</span><span class="n">expand_children</span><span class="p">();</span> 
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">child</span><span class="o">-&gt;</span><span class="n">get_best_child_UCT</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="n">child</span><span class="o">-&gt;</span><span class="n">get_move_count</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//can expand
</span><span class="c1"></span>        <span class="kt">double</span> <span class="n">score</span> <span class="o">=</span> <span class="n">child</span><span class="o">-&gt;</span><span class="n">rollout</span><span class="p">();</span>
        <span class="n">child</span><span class="o">-&gt;</span><span class="n">backpropagate</span><span class="p">(</span><span class="n">score</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">on</span> <span class="n">a</span> <span class="n">du</span> <span class="n">temps</span><span class="p">);</span>
<span class="n">IGame_State</span><span class="o">*</span> <span class="n">bestMove</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">get_best_child_UCB</span><span class="p">();</span> <span class="c1">//use UCB
</span></code></pre></div><p>Et voilà !
La structure de l&rsquo;arbre est très basique, dans la partie 2 on va discuter améliorations !</p>

        
          <div class="blog-tags">
            
              <a href="https://BaptisteHudyma.github.io/tags/cpp/">Cpp</a>&nbsp;
            
              <a href="https://BaptisteHudyma.github.io/tags/ia/">IA</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fBaptisteHudyma.github.io%2fpost%2fmonte_carlo_tree_p1%2f&amp;text=Exploration%20de%20possibilit%c3%a9s%20-%20Partie%201&amp;via=" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fBaptisteHudyma.github.io%2fpost%2fmonte_carlo_tree_p1%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fBaptisteHudyma.github.io%2fpost%2fmonte_carlo_tree_p1%2f&amp;title=Exploration%20de%20possibilit%c3%a9s%20-%20Partie%201" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fBaptisteHudyma.github.io%2fpost%2fmonte_carlo_tree_p1%2f&amp;title=Exploration%20de%20possibilit%c3%a9s%20-%20Partie%201" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fBaptisteHudyma.github.io%2fpost%2fmonte_carlo_tree_p1%2f&amp;title=Exploration%20de%20possibilit%c3%a9s%20-%20Partie%201" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fBaptisteHudyma.github.io%2fpost%2fmonte_carlo_tree_p1%2f&amp;description=Exploration%20de%20possibilit%c3%a9s%20-%20Partie%201" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          
            
          

          
                  <h4 class="see-also">Voir également</h4>
                  <ul>
                
                
                    <li><a href="/post/monte_carlo_tree_p2/">Exploration de possibilités - Partie 2</a></li>
                
                    <li><a href="/post/depth_map_segmentation/">Segmentation de depth map</a></li>
                
                    <li><a href="/post/monocular_depth_map/">Monocular Depth Map</a></li>
                
                    <li><a href="/post/de_cape_et_d_opes/">De CAPE et d&#39;Opés</a></li>
                
                    <li><a href="/post/ppc_slam/">PPC SLAM</a></li>
                
              </ul>

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://BaptisteHudyma.github.io/post/depth_map_segmentation/" data-toggle="tooltip" data-placement="top" title="Segmentation de depth map">&larr; Post précédent</a>
            </li>
          
          
            <li class="next">
              <a href="https://BaptisteHudyma.github.io/post/monte_carlo_tree_p2/" data-toggle="tooltip" data-placement="top" title="Exploration de possibilités - Partie 2">Post suivant &rarr;</a>
            </li>
          
        </ul>
      


      
        
        
      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:bapt.hudyma95650@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/BaptisteHudyma" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://gitlab.com/BaptHdm" title="GitLab">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-gitlab fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/baptiste-hudyma" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Baptiste Hudyma
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2021
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://BaptisteHudyma.github.io">B. Hudyma Logs</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          Carbure avec <a href="https://gohugo.io">Hugo v0.88.1</a>&nbsp;&bull;&nbsp; Avec le Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapté de <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://BaptisteHudyma.github.io/js/main.js"></script>
<script src="https://BaptisteHudyma.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://BaptisteHudyma.github.io/js/load-photoswipe.js"></script>









    
  </body>
</html>

